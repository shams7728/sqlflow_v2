{
  "id": "alter-table",
  "title": "ALTER TABLE",
  "category": "Data Definition",
  "difficulty": "Beginner",
  "estimatedTime": "20 min",
  "starterQuery": "/* Let's add a new column to our customers table! */\n\nALTER TABLE customers\nADD COLUMN email TEXT;",
  "theory": [
    {
      "type": "paragraph",
      "text": "1. What is ALTER TABLE?\nThe `ALTER TABLE` statement is used to add, delete, or modify columns in an existing table. You can also use it to add and drop various constraints on an existing table."
    },
    {
      "type": "paragraph",
      "text": "2. How do you add a column?\nTo add a new column, you use the `ADD COLUMN` clause. The syntax is `ALTER TABLE table_name ADD COLUMN column_name datatype;`."
    },
    {
      "type": "paragraph",
      "text": "3. How do you delete a column?\nTo delete a column, you use the `DROP COLUMN` clause. The syntax is `ALTER TABLE table_name DROP COLUMN column_name;`. Be careful, as this permanently deletes the column and all its data."
    },
    {
      "type": "paragraph",
      "text": "4. How do you rename a column?\nTo rename a column, you use the `RENAME COLUMN` clause. The syntax is `ALTER TABLE table_name RENAME COLUMN old_name TO new_name;`."
    },
    {
      "type": "note",
      "text": "Support for `ALTER TABLE` commands, especially modifying a column's data type, can vary significantly between different SQL database systems."
    }
  ],
  "schema": {
    "tables": [
      {
        "name": "customers",
        "columns": [
          {
            "name": "customer_id",
            "type": "INTEGER",
            "constraints": "PRIMARY KEY"
          },
          {
            "name": "name",
            "type": "TEXT"
          },
          {
            "name": "join_date",
            "type": "DATE"
          }
        ]
      }
    ]
  },
  "sample_data": {
    "customers": [
      {
        "customer_id": 1,
        "name": "Alice Johnson",
        "join_date": "2024-01-10"
      },
      {
        "customer_id": 2,
        "name": "Bob Williams",
        "join_date": "2024-02-15"
      }
    ]
  },
  "practice": [
    {
      "id": "practice_1",
      "title": "Add Email Column",
      "description": "Add a new column named `email` with data type `TEXT` to the `customers` table.",
      "starterCode": "-- Add email column to customers table\nALTER TABLE customers\n-- Complete the statement",
      "solution": "ALTER TABLE customers\nADD COLUMN email TEXT;",
      "hint": "Use ADD COLUMN followed by the column name and data type.",
      "expectedOutput": "Column 'email' added successfully to customers table."
    },
    {
      "id": "practice_2",
      "title": "Add Phone Number Column",
      "description": "Add a column named `phone_number` with data type `TEXT` to store customer phone numbers.",
      "starterCode": "-- Add phone number column\nALTER TABLE customers\n-- Your code here",
      "solution": "ALTER TABLE customers\nADD COLUMN phone_number TEXT;",
      "hint": "Follow the same pattern as adding the email column.",
      "expectedOutput": "Column 'phone_number' added successfully to customers table."
    },
    {
      "id": "practice_3",
      "title": "Rename Column",
      "description": "Rename the `name` column to `full_name` in the customers table.",
      "starterCode": "-- Rename the name column\nALTER TABLE customers\n-- Your code here",
      "solution": "ALTER TABLE customers\nRENAME COLUMN name TO full_name;",
      "hint": "Use RENAME COLUMN old_name TO new_name syntax.",
      "expectedOutput": "Column 'name' renamed to 'full_name' successfully."
    },
    {
      "id": "practice_4",
      "title": "Drop Column",
      "description": "Remove the `join_date` column from the customers table.",
      "starterCode": "-- Remove the join_date column\nALTER TABLE customers\n-- Your code here",
      "solution": "ALTER TABLE customers\nDROP COLUMN join_date;",
      "hint": "Use DROP COLUMN followed by the column name. Be careful - this permanently deletes the column and its data!",
      "expectedOutput": "Column 'join_date' dropped successfully from customers table."
    }
  ],
  "quiz": [
    {
      "id": "altertable_q1",
      "type": "mcq",
      "question": "Which `ALTER TABLE` clause is used to delete a column?",
      "options": [
        "DELETE COLUMN",
        "REMOVE COLUMN",
        "DROP COLUMN",
        "ERASE COLUMN"
      ],
      "answer": "DROP COLUMN",
      "explanation": "DROP COLUMN is the correct SQL syntax to permanently remove a column from a table. This operation cannot be undone and will delete all data in that column."
    },
    {
      "id": "altertable_q2",
      "type": "truefalse",
      "question": "The `ALTER TABLE` command is used to change the data inside the rows of a table.",
      "answer": false,
      "explanation": "ALTER TABLE modifies the structure of a table (adding/removing columns, changing constraints), not the data inside rows. To change data, you would use UPDATE, INSERT, or DELETE commands."
    },
    {
      "id": "altertable_q3",
      "type": "mcq",
      "question": "What is the correct syntax to add a new column named 'age' with INTEGER data type?",
      "options": [
        "ALTER TABLE customers ADD age INTEGER;",
        "ALTER TABLE customers ADD COLUMN age INTEGER;",
        "ALTER TABLE customers CREATE COLUMN age INTEGER;",
        "ALTER TABLE customers INSERT COLUMN age INTEGER;"
      ],
      "answer": "ALTER TABLE customers ADD COLUMN age INTEGER;",
      "explanation": "The correct syntax requires 'ADD COLUMN' followed by the column name and data type. Some databases allow just 'ADD' but 'ADD COLUMN' is more explicit and widely supported."
    },
    {
      "id": "altertable_q4",
      "type": "truefalse",
      "question": "When you drop a column using ALTER TABLE, you can easily recover the data later.",
      "answer": false,
      "explanation": "Dropping a column permanently deletes both the column structure and all data stored in that column. This operation cannot be undone without restoring from a backup."
    },
    {
      "id": "altertable_q5",
      "type": "mcq",
      "question": "To rename a column from 'customer_name' to 'full_name', you would use:",
      "options": [
        "ALTER TABLE customers CHANGE customer_name TO full_name;",
        "ALTER TABLE customers RENAME customer_name TO full_name;",
        "ALTER TABLE customers RENAME COLUMN customer_name TO full_name;",
        "ALTER TABLE customers MODIFY customer_name TO full_name;"
      ],
      "answer": "ALTER TABLE customers RENAME COLUMN customer_name TO full_name;",
      "explanation": "The standard SQL syntax for renaming a column is 'RENAME COLUMN old_name TO new_name'. Some databases have variations, but this is the most widely supported format."
    },
    {
      "id": "altertable_q6",
      "type": "mcq",
      "question": "Which of these operations does NOT require the ALTER TABLE command?",
      "options": [
        "Adding a new column",
        "Dropping an existing column",
        "Inserting new rows of data",
        "Renaming a column"
      ],
      "answer": "Inserting new rows of data",
      "explanation": "Inserting new rows uses the INSERT command, not ALTER TABLE. ALTER TABLE is for structural changes to the table, while INSERT is for adding data."
    },
    {
      "id": "altertable_q7",
      "type": "truefalse",
      "question": "All SQL databases support exactly the same ALTER TABLE operations.",
      "answer": false,
      "explanation": "Different SQL databases (MySQL, PostgreSQL, SQLite, SQL Server, etc.) have variations in their ALTER TABLE support. Some operations may not be available or may have different syntax across databases."
    },
    {
      "id": "altertable_q8",
      "type": "mcq",
      "question": "What happens to existing data when you add a new column to a table?",
      "options": [
        "All existing rows are deleted",
        "Existing rows get NULL values in the new column",
        "The operation fails",
        "Existing data is moved to a backup table"
      ],
      "answer": "Existing rows get NULL values in the new column",
      "explanation": "When you add a new column, existing rows remain unchanged except they get NULL values (or default values if specified) in the new column. No existing data is lost."
    }
  ],
  "challenges": [
    {
      "id": "altertable_ch1",
      "title": "Update Customer Information",
      "steps": [
        {
          "stepId": "altertable_ch1_step1",
          "description": "Add a column named `city` with a data type of `TEXT` to the `customers` table.",
          "solution": "ALTER TABLE customers ADD COLUMN city TEXT;"
        }
      ]
    },
    {
      "id": "altertable_ch2",
      "title": "Restructure the Table",
      "steps": [
        {
          "stepId": "altertable_ch2_step1",
          "description": "First, add a column named `status` with a `TEXT` data type.",
          "solution": "ALTER TABLE customers ADD COLUMN status TEXT;"
        },
        {
          "stepId": "altertable_ch2_step2",
          "description": "Now, remove the `join_date` column from the table.",
          "solution": "ALTER TABLE customers DROP COLUMN join_date;"
        }
      ]
    }
  ]
}
